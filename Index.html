<!DOCTYPE html>
<html>
<body style="padding:16px;font-family:sans-serif;background:#f5f5f5">
  <h1>üîç BeatBot Auto-Debug</h1>
  <div id="log" style="background:#222;color:#0f0;padding:12px;height:400px;overflow:auto;font-size:13px;white-space:pre-wrap"></div>

  <script>
    function log(msg) {
      const el = document.getElementById('log');
      el.textContent += new Date().toLocaleTimeString() + ': ' + msg + '
';
      el.scrollTop = el.scrollHeight;
    }

    async function run() {
      log('Page loaded, starting tests‚Ä¶');

      // 1) Test Netlify proxy ‚Üí Apps Script
      try {
        log('Testing /api?action=getContacts‚Ä¶');
        const r = await fetch('/api?action=getContacts&user=mattblois@gmail.com');
        log('Status: ' + r.status);
        const txt = await r.text();
        log('Body: ' + txt);
      } catch (e) {
        log('ERROR calling /api: ' + e.message);
      }

      // 2) Test Apps Script directly (bypasses Netlify)
      try {
        log('Testing direct Apps Script‚Ä¶');
        const direct = await fetch('https://script.google.com/macros/s/AKfycbxA5Y_Y1dj9uw4Q5KtaGfZ37TJQ_lvWjfoIQD36LWlmNpxzUo1gAhbMaXY13JlH4aj3/exec?action=getContacts&user=mattblois@gmail.com');
        log('Direct status: ' + direct.status);
        const txt2 = await direct.text();
        log('Direct body: ' + txt2);
      } catch (e) {
        log('ERROR calling direct Apps Script: ' + e.message);
      }

      log('Done. Screenshot this log and send it.');
    }

    run();
  </script>
</body>
</html>
